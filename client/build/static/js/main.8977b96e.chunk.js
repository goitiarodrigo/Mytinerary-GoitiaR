(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(20),c=n.n(i),a=n(10),s=n(6),o=n(4),u=n.n(o),l=n(9),d=n(16),j=n.n(d),p={signUp:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n,r){var i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.post("https://my-itinerary-goitia.herokuapp.com/api/signup",e);case 3:if(!(i=t.sent).data.success){t.next=9;break}return n({type:"SIGN",payload:i.data.response}),t.abrupt("return",{response:i.data.response});case 9:return t.abrupt("return",i.data.errors);case 10:t.next=15;break;case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",{success:!1,response:t.t0});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.post("https://my-itinerary-goitia.herokuapp.com/api/login",e);case 3:return(r=t.sent).data.success&&n({type:"SIGN",payload:r.data.response}),t.abrupt("return",{respuesta:r});case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",{success:!1,response:t.t0});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},logOnLs:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.get("https://my-itinerary-goitia.herokuapp.com/api/verifyToken",{headers:{Authorization:"Bearer "+e}});case 3:r=t.sent,n({type:"SIGN",payload:{name:r.data.name,email:r.data.email,photoUser:r.data.photoUser,_id:r.data._id,token:e}}),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",n({type:"LOG_OUT"}));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(e){return function(e,t){e({type:"LOG_OUT"})}}},b={recCities:function(){return function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("https://my-tinerary-goitia.herokuapp.com/api/cities");case 2:if(!(r=e.sent).data.success){e.next=8;break}i=r.data.response,t({type:"GET_ALL_CITIES",payload:i}),e.next=9;break;case 8:throw new Error;case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},filterCity:function(e){return function(t,n){t({type:"GET_CITY",payload:e})}},getCity:function(e){return function(t,n){t({type:"GET_ONE_CITY",payload:e})}},deleteCities:function(){return function(e){e({type:"BORRAR",payload:null})}}},h=n(1),m={logOut:p.logOut,borrar:b.deleteCities},O=Object(s.b)((function(e){return{valid:e.users.token,photoUser:e.users.photoUser,name:e.users.name}}),m)((function(e){return Object(h.jsx)("div",{className:"header",children:Object(h.jsxs)("div",{id:"nav",children:[Object(h.jsx)(a.c,{to:"/home",children:Object(h.jsx)("h5",{children:"Home"})}),Object(h.jsx)(a.c,{to:"/cities",children:Object(h.jsx)("h5",{children:"Cities"})}),!e.valid&&Object(h.jsx)(a.c,{to:"/signup",children:Object(h.jsx)("h5",{children:"Sign up"})}),!e.valid&&Object(h.jsxs)(a.c,{to:"/login",children:[Object(h.jsx)("h5",{children:"Log in"})," "]}),e.valid&&Object(h.jsx)(a.c,{className:"navLink",to:"/home",onClick:function(t){e.logOut(t.target.value),e.borrar()},children:"Log out"}),e.valid?Object(h.jsxs)("div",{id:"srcUser",children:[Object(h.jsxs)("p",{children:["Welcome, ",e.name]}),Object(h.jsx)("img",{id:"sesion",src:e.photoUser,alt:"icono"})]}):Object(h.jsx)("img",{id:"sesion2",src:"/assets/sesion.png",alt:"icono"})]})})})),f=function(){return Object(h.jsxs)("div",{className:"hero",style:{backgroundImage:"url('/assets/flechasnav2.jpg')"},children:[Object(h.jsx)("img",{id:"logo",src:"./assets/LOGO2.png",alt:"..."}),Object(h.jsxs)("div",{id:"botonAccion",children:[Object(h.jsx)("p",{children:"Find your perfect trip, designed by insiders who know and love their cities!"}),Object(h.jsx)(a.b,{to:"/cities",children:Object(h.jsx)("button",{children:"CLICK HERE!"})})]})]})},g=n(8),x=n(52),v=n(107),y=n(108),k=n(109),C=[[{src:"./assets/santiagodechile.jpg",pais:"Santiago"},{src:"./assets/montevideo.jpg",pais:"Montevideo"},{src:"./assets/buenoaires.jpg",pais:"Cordoba"},{src:"./assets/brasilia.jpg",pais:"Rio de Janeiro"}],[{src:"./assets/bogota.jpg",pais:"Bogota"},{src:"./assets/lapaz.jpg",pais:"La Paz"},{src:"./assets/asuncion.jpg",pais:"Ikita"},{src:"./assets/lima.jpg",pais:"Lima"}],[{src:"./assets/caracas.jpg",pais:"Caracas"},{src:"./assets/paramaribo.jpg",pais:"Paramaribo"},{src:"./assets/cayena.jpg",pais:"Cayena"},{src:"./assets/quito.jpg",pais:"Quito"}]],w=function(){var e=Object(r.useState)(0),t=Object(g.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)(!1),a=Object(g.a)(c,2),s=a[0],o=a[1],u=function(){if(!s){var e=n===C.length-1?0:n+1;i(e)}},l=function(){if(!s){var e=0===n?C.length-1:n-1;i(e)}},d=C.map((function(e,t){return Object(h.jsx)(x.a,{onExiting:function(){return o(!0)},onExited:function(){return o(!1)},children:Object(h.jsx)("div",{className:"slide",children:e.map((function(e,t){return Object(h.jsxs)("div",{className:"carouselPhotos",style:{backgroundImage:'url("'.concat(e.src,'")')},children:["  ",Object(h.jsx)("h3",{id:"nameCity",children:e.pais})," "]},t)}))})},t)}));return Object(h.jsxs)(v.a,{activeIndex:n,next:u,previous:l,children:[Object(h.jsx)(y.a,{items:d,activeIndex:n,onClickHandler:function(e){s||i(e)}}),d,Object(h.jsx)(k.a,{direction:"prev",onClickHandler:l}),Object(h.jsx)(k.a,{direction:"next",onClickHandler:u})]})},I={logOut:p.logOut},E=Object(s.b)((function(e){return{valid:e.users.token}}),I)((function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{id:"footer2",children:[Object(h.jsxs)("nav",{id:"footer",children:[Object(h.jsx)(a.c,{to:"/home",children:Object(h.jsx)("h5",{children:"Home"})}),Object(h.jsx)(a.c,{to:"/cities",children:Object(h.jsx)("h5",{children:"Cities"})}),!e.valid&&Object(h.jsx)(a.c,{to:"/signup",children:Object(h.jsx)("h5",{children:"Sign up"})}),!e.valid&&Object(h.jsxs)(a.c,{to:"/login",children:[Object(h.jsx)("h5",{children:"Log in"})," "]}),e.valid&&Object(h.jsx)(a.c,{className:"navLink",to:"/home",onClick:function(t){e.logOut(t.target.value)},children:"Log out"})]}),Object(h.jsxs)("div",{id:"redesSociales",children:[Object(h.jsx)("a",{rel:"noreferrer",href:"https://www.facebook.com",target:"_blank",children:Object(h.jsx)("img",{className:"redSocial",src:"/assets/facebook.png",alt:"redSocialIcono"})}),Object(h.jsx)("a",{rel:"noreferrer",href:"https://www.instagram.com",target:"_blank",children:Object(h.jsx)("img",{className:"redSocial",src:"/assets/ins.png",alt:"redSocialIcono"})}),Object(h.jsx)("a",{rel:"noreferrer",href:"https://www.twitter.com",target:"_blank",children:Object(h.jsx)("img",{className:"redSocial",src:"/assets/twitter.png",alt:"redSocialIcono"})})]})]})})})),S=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("img",{id:"medio",src:"./assets/medio.png",alt:"datos interesantes"}),Object(h.jsxs)("div",{id:"fondoMain",style:{backgroundImage:'url("./assets/fondo.jpg")'},children:[Object(h.jsx)("h3",{id:"itinerario",children:"Popular MYtineraries"}),Object(h.jsx)(w,{}),Object(h.jsx)(E,{})]})]})},_=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O,{}),Object(h.jsx)(f,{}),Object(h.jsx)(S,{})]})},T={getCities:b.recCities,filter:b.filterCity},N=Object(s.b)((function(e){return{cities:e.cities.allCities,cityFiltrada:e.cities.cityFiltered,token:e.users.token}}),T)((function(e){var t=Object(r.useState)(!0),n=Object(g.a)(t,2),i=n[0],c=n[1];if(Object(r.useEffect)((function(){function t(){return(t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getCities();case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),alert("Error. You don't have permission"),e.history.push("/home");case 9:c(!1);case 10:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),i)return Object(h.jsx)("img",{id:"loader",src:"https://cdn.discordapp.com/attachments/871774608515280896/876197618932396062/gif-aviao.gif",alt:"loading"});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{id:"contenedorBuscador",children:Object(h.jsx)("input",{onChange:function(t){e.filter(t.target.value)},type:"text",id:"buscador",placeholder:"Search your favorite city"})}),0===e.cityFiltrada.length?Object(h.jsxs)("div",{id:"notFoundContainer",children:[Object(h.jsx)("h2",{children:"The city you are looking for is not in our database. Try again"})," ",Object(h.jsx)("div",{id:"notFoundCity",style:{backgroundImage:"url('/assets/error.jpg')"}})]}):e.cityFiltrada.map((function(e,t){return Object(h.jsx)(a.b,{to:"/city/".concat(e._id),children:Object(h.jsxs)("div",{className:"foto",id:"fotoCity".concat(t+1),style:{backgroundImage:"url('".concat(e.photo,"')")},children:[Object(h.jsx)("h4",{children:e.country}),Object(h.jsx)("h2",{children:e.city})]})},t)}))]})})),L=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O,{}),Object(h.jsx)("div",{id:"fotoHeader",style:{backgroundImage:"url('./assets/header.jpg')"}}),Object(h.jsx)(N,{}),Object(h.jsx)(E,{})]})},B=(n(91),n(92),n(11)),F=n(32),U=n(13),A=n.n(U),P=Object(s.b)((function(e){return{token:e.users.token,_id:e.users._id}}))((function(e){var t=Object(r.useRef)(),n=Object(r.useState)(!1),i=Object(g.a)(n,2),c=i[0],a=i[1],s=e.commentCurrent.userId._id===e._id;Object(r.useEffect)((function(){a(!1)}),[e.renderizar]);var o=Object(h.jsxs)("div",{id:"inputChange2",children:[c?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("input",{type:"text",defaultValue:e.commentCurrent.comment,ref:t}),Object(h.jsx)("button",{onClick:function(){return e.edithComment(e.commentCurrent._id,t.current.value,e.token)},children:"\u2714\ufe0f"})]}):Object(h.jsx)("p",{children:e.commentCurrent.comment}),Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:function(){return a(!c)},children:"\u270f\ufe0f"}),Object(h.jsx)("button",{onClick:function(){A.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){t.isConfirmed&&(e.delete(e.itineraryId,e.commentCurrent._id,e.token),A.a.fire("Deleted!","Your file has been deleted.","success"))}))},children:"\ud83d\uddd1\ufe0f"})]})]}),u=s?o:Object(h.jsx)("p",{children:e.commentCurrent.comment});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{id:"divInputChange",children:[Object(h.jsx)("img",{id:"picInputChange",src:e.commentCurrent.userId.photoUser,alt:"..."}),Object(h.jsx)("p",{id:"pInputChange",children:e.commentCurrent.userId.name})]}),Object(h.jsx)("div",{id:"inputChange",children:u})]})})),G={getItinerariesCity:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n,r){var i,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.get("https://my-tinerary-goitia.herokuapp.com/api/itineraries/".concat(e));case 3:if(!(i=t.sent).data.success){t.next=9;break}c=i.data.response,n({type:"GET_ITINERARIES_CITY",payload:c}),t.next=10;break;case 9:throw new Error("Oops, something went wrong");case 10:t.next=15;break;case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",{success:!1,response:t.t0.message});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()},addComment:function(e,t,n){return Object(l.a)(u.a.mark((function r(){var i;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,j.a.put("https://my-tinerary-goitia.herokuapp.com/api/itineraries/comments/".concat(e),{comment:t,type:"addComment"},{headers:{Authorization:"Bearer "+n}});case 3:if(!(i=r.sent).data.success){r.next=8;break}return r.abrupt("return",{success:!0,response:i});case 8:throw new Error;case 9:r.next=14;break;case 11:return r.prev=11,r.t0=r.catch(0),r.abrupt("return",{success:!1,response:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))},modifyComment:function(e,t,n){return Object(l.a)(u.a.mark((function r(){var i;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,j.a.put("https://my-tinerary-goitia.herokuapp.com/api/itineraries/comments/".concat(e),{comment:t,type:"modifyComment"},{headers:{Authorization:"Bearer "+n}});case 3:if(!(i=r.sent).data.success){r.next=8;break}return r.abrupt("return",{success:!0,response:i});case 8:throw new Error;case 9:r.next=14;break;case 11:return r.prev=11,r.t0=r.catch(0),r.abrupt("return",{success:!1,response:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))},deleteComment:function(e,t,n){return Object(l.a)(u.a.mark((function r(){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,j.a.put("https://my-tinerary-goitia.herokuapp.com/api/itineraries/comments/".concat(e),{idComment:t,type:"deleteComment"},{headers:{Authorization:"Bearer "+n}});case 3:if(!r.sent.data.success){r.next=8;break}return r.abrupt("return",{success:!0});case 8:throw new Error;case 9:r.next=14;break;case 11:return r.prev=11,r.t0=r.catch(0),r.abrupt("return",{success:!1,response:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))},likeItinerary:function(e,t){return Object(l.a)(u.a.mark((function n(){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j.a.put("https://my-tinerary-goitia.herokuapp.com/api/itinerary/like/".concat(e),{},{headers:{Authorization:"Bearer "+t}});case 3:return r=n.sent,n.abrupt("return",r);case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))}},Y={changeComment:G.modifyComment,deleteComment:G.deleteComment,addComment:G.addComment},R=Object(s.b)((function(e){return{token:e.users.token}}),Y)((function(e){var t=A.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",A.a.stopTimer),e.addEventListener("mouseleave",A.a.resumeTimer)}}),n=Object(r.useState)(!1),i=Object(g.a)(n,2),c=i[0],a=i[1],s=Object(r.useState)(e.currentComment),o=Object(g.a)(s,2),u=o[0],l=o[1],d=Object(r.useRef)(),j=function(t,n,r){e.deleteComment(t,n,r).then((function(e){if(!e.success)throw new Error;l(u.filter((function(e){return e._id!==n})))})).catch((function(e){return console.log(e)}))},p=function(t,n,r){e.changeComment(t,n,r).then((function(e){u.map((function(e){e._id===t&&(e.comment=n)})),l(u),a(!c)})).catch((function(e){return console.log(e)}))},b=function(){var t=d.current.value;e.addComment(e.itineraryId,t,e.token).then((function(e){return l(e.response.data.response)}),d.current.value="").catch((function(e){return console.log(e)}))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h4",{children:"Comments"}),Object(h.jsx)("div",{id:"commentsContainer",children:u.map((function(t,n){return Object(h.jsx)(P,{commentCurrent:t,delete:j,itineraryId:e.itineraryId,edithComment:p,renderizar:c},n)}))}),Object(h.jsxs)("div",{id:"comment",children:[Object(h.jsx)("input",{type:"text",ref:d,placeholder:e.token?"Write a comment":"You need log for comment",disabled:!e.token,onKeyPress:function(e){"Enter"===e.key&&b()}}),Object(h.jsx)("button",{onClick:e.token?b:function(){t.fire({icon:"error",title:"You need log for comment"})},children:"\u2714\ufe0f"})]})]})})),H=function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{id:"carouselContainer",children:[Object(h.jsx)("div",{id:"carouselContainerSec",children:Object(h.jsx)(F.a,{className:"carrouselActivities",children:e.activities.map((function(e,t){return Object(h.jsxs)(F.a.Item,{interval:2e3,className:"photoAContainer",children:[Object(h.jsx)("div",{className:"activityPhoto",style:{backgroundImage:'url("'.concat(e.picAct,'")')}}),Object(h.jsx)(F.a.Caption,{className:"caption",children:Object(h.jsx)("p",{children:e.title})})]},t)}))})}),Object(h.jsx)("div",{id:"containerComments",children:Object(h.jsx)(R,{itineraryId:e.itineraryId,currentComment:e.comments})})]})})},z={getActivitiesPerIt:function(e){return Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.get("https://my-tinerary-goitia.herokuapp.com/api/activity/".concat(e));case 3:if(!(n=t.sent).data.success){t.next=6;break}return t.abrupt("return",n.data.response);case 6:t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",{success:!1,response:t.t0});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))}},W=n(53),q={getActivities:z.getActivitiesPerIt,likeItinerary:G.likeItinerary},D=Object(s.b)((function(e){return{token:e.users.token,_id:e.users._id}}),q)((function(e){var t=e.itinerario,n=t.price,i=t.hashtag,c=t.description,a=t.author,s=t.photo,o=t.duration,d=t.itinerary,j=t.likes,p=t._id,b=t.comments,m=Object(r.useState)(!0),O=Object(g.a)(m,2),f=O[0],x=O[1],v=Object(r.useState)([]),y=Object(g.a)(v,2),k=y[0],C=y[1],w=Object(r.useState)(!0),I=Object(g.a)(w,2),E=I[0],S=I[1],_=Object(r.useState)(j),T=Object(g.a)(_,2),N=T[0],L=T[1],B=A.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",A.a.stopTimer),e.addEventListener("mouseleave",A.a.resumeTimer)}}),F=function(){var t=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(S(!1),e.token){t.next=5;break}B.fire({icon:"error",title:"You need log for to interact"}),t.next=9;break;case 5:return t.next=7,e.likeItinerary(p,e.token);case 7:n=t.sent,L(n.data.response);case 9:S(!0);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{id:"picContainer",children:[Object(h.jsxs)("div",{id:"card",children:[Object(h.jsx)("img",{id:"foto",src:s,alt:"city"}),Object(h.jsxs)("div",{id:"cardIn",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("img",{src:a.photo,alt:"..."}),Object(h.jsx)("h2",{children:a.name})]}),Object(h.jsx)("h2",{children:d}),Object(h.jsx)("p",{className:"description",children:c}),Object(h.jsxs)("div",{id:"iteraccion",children:[Object(h.jsx)("div",{children:i.map((function(e,t){return Object(h.jsx)("p",{className:"hash",children:e},t)}))}),Object(h.jsxs)("div",{id:"likeButIt",children:[Object(h.jsx)("button",{id:"likeBut",onClick:E?F:null,children:Object(h.jsxs)("p",{className:"like",children:[" ",N.includes(e._id)?"\u2764\ufe0f":"\ud83e\udd0d"]})}),Object(h.jsx)("p",{children:N.length})]})]}),Object(h.jsxs)("div",{id:"duration",children:[Object(h.jsxs)("p",{className:"duration",children:["Price: ","\ud83d\udcb5".repeat(n)]}),Object(h.jsxs)("p",{className:"duration",children:["Duration: ",o,"hs \ud83d\udd51"]})]}),Object(h.jsx)("div",{id:"buttonClick",children:Object(h.jsx)("button",{id:"buttonOnClick",onClick:function(){(x(!f),f)&&function(){var t=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getActivities(p);case 3:n=t.sent,C(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()()},children:f?"View more":"View less"})})]})]}),f?Object(h.jsx)("h3",{style:{display:"none"},children:"Under Construction"}):Object(h.jsx)("div",{style:{display:"block"},children:k.length>0?Object(h.jsx)(H,{activities:k,itineraryId:p,comments:b}):Object(h.jsx)("div",{id:"loadingSpinner",children:Object(h.jsx)(W.a,{animation:"border",variant:"primary"})})})]})})})),J={getCities:b.recCities,getItineraries:G.getItinerariesCity,city:b.getCity},K=Object(s.b)((function(e){return{cities:e.cities.cityFiltered,itineraries:e.itineraries.allItineraries,cityOne:e.cities.city}}),J)((function(e){var t=Object(r.useState)(!0),n=Object(g.a)(t,2),i=n[0],c=n[1];return Object(r.useEffect)((function(){if(window.scrollTo(0,0),!e.cities.length)return e.history.push("/cities"),!1;function t(){return(t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.city(e.match.params.id);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),alert("Will be redirected to Home page"),e.history.push("/home");case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}function n(){return(n=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getItineraries(e.match.params.id);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),alert("Will be redirected to Home page"),e.history.push("/home");case 9:c(!1);case 10:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}(),function(){n.apply(this,arguments)}()}),[]),i?Object(h.jsx)("div",{id:"loader",children:Object(h.jsx)("img",{src:"https://cdn.discordapp.com/attachments/871774608515280896/876197618932396062/gif-aviao.gif",alt:"loading"})}):Object(h.jsxs)("div",{id:"city",children:[Object(h.jsx)(O,{}),Object(h.jsxs)("div",{id:"headerCity",style:{backgroundImage:"url('".concat(e.cityOne.photo,"')")},children:[Object(h.jsx)("h1",{children:e.cityOne.city})," (",Object(h.jsxs)("h3",{children:[e.cityOne.country,")"]})]}),e.itineraries.length>0?e.itineraries.map((function(e){return Object(h.jsx)(D,{itinerario:e},e._id)})):Object(h.jsxs)("div",{id:"itinerariesNotFound",children:[Object(h.jsx)("h1",{children:"This city has no itineraries yet"}),Object(h.jsx)("img",{src:"https://blog.ida.cl/wp-content/uploads/sites/5/2017/03/Tra%CC%81fico-de-bu%CC%81squeda-en-Search-Console.jpg",alt:"..."})]}),Object(h.jsx)(a.b,{to:"/cities",children:Object(h.jsx)("h2",{id:"back",children:"GO BACK!"})}),Object(h.jsx)(E,{})]})})),M=n(23),V=n(15),Q=n(26),X=(n(103),n(30)),Z=n.n(X),$={signUp:p.signUp},ee=Object(s.b)(null,$)((function(e){Object(r.useEffect)((function(){j.a.get("https://restcountries.eu/rest/v2/all?fields=name").then((function(e){return c(e.data)}))}),[]);var t=Object(r.useState)([]),n=Object(g.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)({name:"",lastName:"",email:"",password:"",photoUser:"",country:""}),s=Object(g.a)(a,2),o=s[0],u=s[1],l=A.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",A.a.stopTimer),e.addEventListener("mouseleave",A.a.resumeTimer)}}),d=function(e){u(Object(V.a)(Object(V.a)({},o),{},Object(M.a)({},e.target.name,e.target.value)))},p=function(t){var n={name:t.profileObj.givenName,lastName:t.profileObj.familyName,email:t.profileObj.email,password:t.profileObj.googleId,photoUser:t.profileObj.imageUrl,google:!0,country:"Hawaii"};e.signUp(n).then((function(e){void 0===e?l.fire({icon:"error",title:"Email is already in use"}):l.fire({icon:"success",title:"Your registration has been completed"})})).catch((function(e){return console.log(e)}))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Q.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(h.jsx)(Q.a,{}),Object(h.jsxs)("div",{className:"sign",style:{backgroundImage:"url('https://fondosmil.com/fondo/21037.jpg')"},children:[Object(h.jsx)("div",{id:"gradient",children:Object(h.jsx)(O,{})}),Object(h.jsx)("div",{className:"inputs",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Create account"}),Object(h.jsx)("input",{type:"text",placeholder:"Name",name:"name",value:o.name,onChange:d}),Object(h.jsx)("input",{type:"text",placeholder:"Last name",name:"lastName",value:o.lastName,onChange:d}),Object(h.jsx)("input",{type:"email",placeholder:"example@example.com",name:"email",value:o.email,onChange:d}),Object(h.jsx)("input",{type:"password",placeholder:"Password",name:"password",value:o.password,onChange:d}),Object(h.jsx)("input",{type:"url",placeholder:"Url photo",name:"photoUser",value:o.photoUser,onChange:d}),Object(h.jsxs)("select",{name:"country",onChange:d,value:o.country,children:[Object(h.jsx)("option",{children:"Select country..."}),i.map((function(e,t){return Object(h.jsx)("option",{children:e.name},t)}))]}),Object(h.jsx)("button",{id:"buttonSign",onClick:function(){var t=!0;for(var n in o)if(!o[n].length){Q.b.warn("The field to complete is "+[n],{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),t=!1;break}t&&e.signUp(o).then((function(e){if(e.includes("response")||e.map((function(e){Q.b.warn(e.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),!e.response.email&t)l.fire({icon:"error",title:"Email is already in use"});else{if(!t)throw new Error;l.fire({icon:"success",title:"Your registration has been completed"})}})).catch((function(e){return console.log(e)}))},children:"Sign up"}),Object(h.jsx)(Z.a,{clientId:"564301942115-skr3qljqv4t42m3vb7icf1mi1ive9r2g.apps.googleusercontent.com",buttonText:"Sign up wit Google Account",onSuccess:p,onFailure:p,cookiePolicy:"single_host_origin"}),","]})}),Object(h.jsx)(E,{})]})]})})),te={logIn:p.logIn},ne=Object(s.b)(null,te)((function(e){var t=Object(r.useState)({email:"",password:""}),n=Object(g.a)(t,2),i=n[0],c=n[1],s=function(e){c(Object(V.a)(Object(V.a)({},i),{},Object(M.a)({},e.target.name,e.target.value)))},o=A.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",A.a.stopTimer),e.addEventListener("mouseleave",A.a.resumeTimer)}}),u=function(t){var n={email:t.profileObj.email,password:t.profileObj.googleId};e.logIn(n).then((function(e){e.respuesta.data.success?o.fire({icon:"success",title:"Welcome"}):o.fire({icon:"error",title:"Email or password incorrect"})})).catch((function(e){return console.log(e)}))};return Object(h.jsxs)("div",{className:"sign",style:{backgroundImage:"url('https://fondosmil.com/fondo/21037.jpg')"},children:[Object(h.jsx)("div",{id:"gradient",children:Object(h.jsx)(O,{})}),Object(h.jsx)("div",{className:"inputs inputs2",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"email",placeholder:"Enter your email",name:"email",value:i.email,onChange:s}),Object(h.jsx)("input",{type:"password",placeholder:"Enter your password",name:"password",value:i.password,onChange:s}),Object(h.jsx)("button",{id:"buttonSign",onClick:function(){e.logIn(i).then((function(e){for(var t in i){if(!i[t].length){o.fire({icon:"error",title:"The field complete is: "+[t]});break}if(e.respuesta.data.success)o.fire({icon:"success",title:"Signed in successfully. Welcome"});else{if(e.respuesta.data.success)throw new Error;o.fire({icon:"error",title:"Password or email incorrect"})}}})).catch((function(e){return o.fire({icon:"error",title:"Oops, something went wrong"})}))},children:"Login"}),Object(h.jsx)(Z.a,{clientId:"564301942115-skr3qljqv4t42m3vb7icf1mi1ive9r2g.apps.googleusercontent.com",buttonText:"Login with Google account",onSuccess:u,onFailure:u,cookiePolicy:"single_host_origin"}),",",Object(h.jsxs)("p",{children:["Don't have an account? ",Object(h.jsx)(a.b,{to:"/signup",children:"Sign up here!"})]})]})}),Object(h.jsx)(E,{})]})})),re={logLs:p.logOnLs},ie=Object(s.b)((function(e){return{valid:e.users.token}}),re)((function(e){return Object(r.useEffect)((function(){localStorage.getItem("token")&&e.logLs(localStorage.getItem("token"))}),[]),Object(h.jsx)(a.a,{children:Object(h.jsxs)(B.d,{children:[Object(h.jsx)(B.b,{exact:!0,path:"/",component:_}),Object(h.jsx)(B.b,{path:"/home",component:_}),Object(h.jsx)(B.b,{path:"/city/:id",component:K}),Object(h.jsx)(B.b,{path:"/cities",component:L}),!e.valid&&Object(h.jsx)(B.b,{path:"/signup",component:ee}),!e.valid&&Object(h.jsx)(B.b,{path:"/login",component:ne}),Object(h.jsx)(B.a,{to:"/"})]})})})),ce=n(25),ae=n(54),se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{allCities:[],cityFiltered:[],city:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_CITIES":return Object(V.a)(Object(V.a)({},e),{},{allCities:t.payload,cityFiltered:t.payload});case"GET_CITY":return Object(V.a)(Object(V.a)({},e),{},{cityFiltered:e.allCities.filter((function(e){return e.city.toLowerCase().startsWith(t.payload.trim().toLowerCase())}))});case"GET_ONE_CITY":return Object(V.a)(Object(V.a)({},e),{},{city:e.allCities.find((function(e){return e._id===t.payload}))});case"BORRAR":return Object(V.a)(Object(V.a)({},e),{},{allCities:t.payload});default:return e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{allItineraries:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ITINERARIES_CITY":return Object(V.a)(Object(V.a)({},e),{},{allItineraries:t.payload});default:return e}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:null,token:null,email:null,photoUser:null,validation:!1,_id:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN":return localStorage.setItem("token",t.payload.token),{name:t.payload.name,email:t.payload.email,photoUser:t.payload.photoUser,token:t.payload.token,_id:t.payload._id,validation:!1};case"LOG_OUT":return localStorage.removeItem("token"),{name:null,email:null,photoUser:null,token:null,validation:!0};default:return e}},le=Object(ce.b)({cities:se,itineraries:oe,users:ue}),de=Object(ce.c)(le,Object(ce.a)(ae.a));c.a.render(Object(h.jsx)(s.a,{store:de,children:Object(h.jsx)(ie,{})}),document.getElementById("root"))},92:function(e,t,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.8977b96e.chunk.js.map